# Using a Struct vs a Class when populating a queue

// * Summary *

BenchmarkDotNet=v0.12.1, OS=Windows 10.0.21370
Intel Xeon W-2123 CPU 3.60GHz, 1 CPU, 8 logical and 4 physical cores
.NET Core SDK=5.0.202
  [Host]   : .NET Core 5.0.5 (CoreCLR 5.0.521.16609, CoreFX 5.0.521.16609), X64 RyuJIT
  ShortRun : .NET Core 5.0.5 (CoreCLR 5.0.521.16609, CoreFX 5.0.521.16609), X64 RyuJIT

Job=ShortRun  IterationCount=3  LaunchCount=1
WarmupCount=3

|           Method |   Count |             Mean |            Error |         StdDev | Ratio | RatioSD |       Gen 0 |       Gen 1 |     Gen 2 |     Allocated |
|----------------- |-------- |-----------------:|-----------------:|---------------:|------:|--------:|------------:|------------:|----------:|--------------:|
| QueueUsingStruct |      10 |         4.091 us |         1.626 us |      0.0891 us |  0.94 |    0.04 |      9.8038 |           - |         - |      41.33 KB |
|  QueueUsingClass |      10 |         4.352 us |         4.619 us |      0.2532 us |  1.00 |    0.00 |      9.9182 |      0.0153 |         - |       41.8 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |     100 |        50.845 us |        40.589 us |      2.2248 us |  1.06 |    0.07 |     78.9795 |     39.3677 |         - |     413.28 KB |
|  QueueUsingClass |     100 |        48.177 us |        28.124 us |      1.5416 us |  1.00 |    0.00 |     87.7686 |     17.5171 |         - |     417.97 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |    1000 |       618.564 us |       892.082 us |     48.8980 us |  0.91 |    0.09 |    772.4609 |    239.2578 |         - |    4132.81 KB |
|  QueueUsingClass |    1000 |       681.782 us |     1,013.075 us |     55.5300 us |  1.00 |    0.00 |    774.4141 |    282.2266 |         - |    4179.69 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |   10000 |    30,662.529 us |    40,920.872 us |  2,243.0111 us |  1.04 |    0.10 |   7437.5000 |   3062.5000 | 1000.0000 |   41328.91 KB |
|  QueueUsingClass |   10000 |    29,543.202 us |    11,025.742 us |    604.3581 us |  1.00 |    0.00 |   7468.7500 |   3000.0000 |  968.7500 |    41797.6 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct |  100000 |   464,132.233 us |   739,423.318 us | 40,530.2872 us |  1.03 |    0.20 |  71000.0000 |  26000.0000 | 4000.0000 |  413285.98 KB |
|  QueueUsingClass |  100000 |   459,286.000 us | 1,127,303.549 us | 61,791.3114 us |  1.00 |    0.00 |  72000.0000 |  27000.0000 | 4000.0000 |  417974.88 KB |
|                  |         |                  |                  |                |       |         |             |             |           |               |
| QueueUsingStruct | 1000000 | 4,089,415.767 us | 1,368,039.403 us | 74,986.8559 us |  0.91 |    0.02 | 682000.0000 | 244000.0000 | 8000.0000 | 4132836.88 KB |
|  QueueUsingClass | 1000000 | 4,491,414.633 us |   667,370.620 us | 36,580.8356 us |  1.00 |    0.00 | 690000.0000 | 244000.0000 | 8000.0000 | 4179703.82 KB |




```

BenchmarkDotNet v0.15.2, Windows 11 (10.0.22631.6199/23H2/2023Update/SunValley3) (Hyper-V)
AMD EPYC 7763 2.44GHz, 1 CPU, 16 logical and 8 physical cores
.NET SDK 10.0.100
  [Host]    : .NET 10.0.0 (10.0.25.52411), X64 RyuJIT AVX2
  .NET 10.0 : .NET 10.0.0 (10.0.25.52411), X64 RyuJIT AVX2
  .NET 9.0  : .NET 10.0.0 (10.0.25.52411), X64 RyuJIT AVX2


```
| Method           | Job       | Runtime   | Count   | Mean             | Error          | StdDev         | Ratio | RatioSD | Gen0        | Gen1        | Gen2      | Allocated     | Alloc Ratio |
|----------------- |---------- |---------- |-------- |-----------------:|---------------:|---------------:|------:|--------:|------------:|------------:|----------:|--------------:|------------:|
| **QueueUsingStruct** | **.NET 10.0** | **.NET 10.0** | **10**      |         **1.366 μs** |      **0.0263 μs** |      **0.0292 μs** |  **0.99** |    **0.03** |      **2.5291** |      **0.1678** |         **-** |      **41.33 KB** |        **0.99** |
| QueueUsingClass  | .NET 10.0 | .NET 10.0 | 10      |         1.386 μs |      0.0275 μs |      0.0337 μs |  1.00 |    0.03 |      2.5578 |      0.1698 |         - |       41.8 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| QueueUsingStruct | .NET 9.0  | .NET 9.0  | 10      |         1.333 μs |      0.0266 μs |      0.0381 μs |  0.93 |    0.03 |      2.5291 |      0.1678 |         - |      41.33 KB |        0.99 |
| QueueUsingClass  | .NET 9.0  | .NET 9.0  | 10      |         1.431 μs |      0.0274 μs |      0.0315 μs |  1.00 |    0.03 |      2.5578 |      0.1698 |         - |       41.8 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| **QueueUsingStruct** | **.NET 10.0** | **.NET 10.0** | **100**     |        **13.838 μs** |      **0.2752 μs** |      **0.3858 μs** |  **0.93** |    **0.04** |     **25.2838** |     **11.8713** |         **-** |     **413.28 KB** |        **0.99** |
| QueueUsingClass  | .NET 10.0 | .NET 10.0 | 100     |        14.829 μs |      0.2932 μs |      0.4564 μs |  1.00 |    0.04 |     25.5737 |     14.2822 |         - |     417.97 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| QueueUsingStruct | .NET 9.0  | .NET 9.0  | 100     |        14.326 μs |      0.2798 μs |      0.3222 μs |  0.97 |    0.03 |     25.2838 |     11.8713 |         - |     413.28 KB |        0.99 |
| QueueUsingClass  | .NET 9.0  | .NET 9.0  | 100     |        14.718 μs |      0.2775 μs |      0.2596 μs |  1.00 |    0.02 |     25.5737 |     14.2822 |         - |     417.97 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| **QueueUsingStruct** | **.NET 10.0** | **.NET 10.0** | **1000**    |       **212.784 μs** |      **3.2181 μs** |      **2.6873 μs** |  **0.93** |    **0.02** |    **252.9297** |    **239.0137** |         **-** |    **4132.81 KB** |        **0.99** |
| QueueUsingClass  | .NET 10.0 | .NET 10.0 | 1000    |       228.709 μs |      4.5004 μs |      5.3575 μs |  1.00 |    0.03 |    255.6152 |    240.2344 |         - |    4179.69 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| QueueUsingStruct | .NET 9.0  | .NET 9.0  | 1000    |       211.013 μs |      4.2079 μs |      5.1676 μs |  0.92 |    0.03 |    252.9297 |    239.0137 |         - |    4132.81 KB |        0.99 |
| QueueUsingClass  | .NET 9.0  | .NET 9.0  | 1000    |       229.693 μs |      3.2781 μs |      3.0664 μs |  1.00 |    0.02 |    255.6152 |    240.2344 |         - |    4179.69 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| **QueueUsingStruct** | **.NET 10.0** | **.NET 10.0** | **10000**   |    **15,654.707 μs** |    **297.3462 μs** |    **305.3527 μs** |  **1.00** |    **0.03** |   **3343.7500** |   **3281.2500** | **1000.0000** |   **41329.44 KB** |        **0.99** |
| QueueUsingClass  | .NET 10.0 | .NET 10.0 | 10000   |    15,640.423 μs |    305.9833 μs |    340.0996 μs |  1.00 |    0.03 |   3375.0000 |   3296.8750 |  937.5000 |   41798.14 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| QueueUsingStruct | .NET 9.0  | .NET 9.0  | 10000   |    15,932.872 μs |    236.2274 μs |    209.4095 μs |  1.01 |    0.02 |   3359.3750 |   3281.2500 | 1000.0000 |   41329.51 KB |        0.99 |
| QueueUsingClass  | .NET 9.0  | .NET 9.0  | 10000   |    15,813.969 μs |    299.4830 μs |    265.4839 μs |  1.00 |    0.02 |   3375.0000 |   3296.8750 |  937.5000 |   41798.12 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| **QueueUsingStruct** | **.NET 10.0** | **.NET 10.0** | **100000**  |   **161,011.429 μs** |  **3,178.9136 μs** |  **4,020.3082 μs** |  **0.97** |    **0.03** |  **27750.0000** |  **27500.0000** | **2500.0000** |   **413285.4 KB** |        **0.99** |
| QueueUsingClass  | .NET 10.0 | .NET 10.0 | 100000  |   166,648.424 μs |  3,308.4351 μs |  4,528.6237 μs |  1.00 |    0.04 |  27666.6667 |  27333.3333 | 2333.3333 |  417972.52 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| QueueUsingStruct | .NET 9.0  | .NET 9.0  | 100000  |   160,794.385 μs |  3,178.3320 μs |  3,783.5785 μs |  0.97 |    0.04 |  27750.0000 |  27500.0000 | 2500.0000 |  413285.38 KB |        0.99 |
| QueueUsingClass  | .NET 9.0  | .NET 9.0  | 100000  |   165,957.350 μs |  3,282.2567 μs |  4,912.7277 μs |  1.00 |    0.04 |  27666.6667 |  27333.3333 | 2333.3333 |  417972.74 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| **QueueUsingStruct** | **.NET 10.0** | **.NET 10.0** | **1000000** | **1,525,134.962 μs** | **30,211.3068 μs** | **41,353.5813 μs** |  **0.94** |    **0.04** | **260000.0000** | **259000.0000** | **8000.0000** | **4132831.21 KB** |        **0.99** |
| QueueUsingClass  | .NET 10.0 | .NET 10.0 | 1000000 | 1,616,482.992 μs | 32,010.5715 μs | 54,356.3842 μs |  1.00 |    0.05 | 263000.0000 | 262000.0000 | 8000.0000 | 4179705.48 KB |        1.00 |
|                  |           |           |         |                  |                |                |       |         |             |             |           |               |             |
| QueueUsingStruct | .NET 9.0  | .NET 9.0  | 1000000 | 1,568,092.317 μs | 31,090.0069 μs | 51,944.4215 μs |  0.97 |    0.03 | 260000.0000 | 259000.0000 | 8000.0000 | 4132829.15 KB |        0.99 |
| QueueUsingClass  | .NET 9.0  | .NET 9.0  | 1000000 | 1,625,125.347 μs | 26,710.6786 μs | 24,985.1853 μs |  1.00 |    0.02 | 263000.0000 | 262000.0000 | 8000.0000 |  4179705.9 KB |        1.00 |
